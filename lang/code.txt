!include STDLIB;

!memset hffff;

!tmpl hw;
	.OUT_TERM_CURSOR_VISIBLE;exeout;
	.OUT_MEM_UPDATE_FIXED_POS_FROM_CURSOR;exeout;
	!setl Hello, World!;rmc;clear;
	.OUT_MEM_SET_CURSOR;exeout;
	.print;
	
	.OUT_MEM_UPDATE_FIXED_POS_FROM_CURSOR;exeout;
	loop;
		clear;
		rmc;
	endloop;
	.OUT_MEM_SET_CURSOR;exeout;
!endtmpl;

!tmpl main;
	add;
	loop;
		rmc;
		
		.input;.OUT_TERM_NEWLINE;exeout;.OUT_MEM_UPDATE_FIXED_POS_FROM_CURSOR;exeout;
		
		rmc;!set lA;lmc;
		is;

		.if;
			clear;rmc;clear;lmc;
			.hw;
			clear;copy;
		.endif;
		paste;

		rmc;clear;!set lB;lmc;
		is;
		
		.if;
			clear;rmc;clear;lmc;
			.OUT_PCSPEAKER_BEEP;exeout;
			clear;copy;
		.endif;
		paste;
		
		rmc;clear;!set lC;lmc;
		is;

		.if;
			clear;rmc;clear;lmc;
			.OUT_POWER_REBOOT;exeout;
			clear;copy;
		.endif;
		paste;

		rmc;clear;!set lD;lmc;
		is;

		.if;
			clear;rmc;clear;lmc;
			.OUT_POWER_OFF;exeout;
			clear;copy;
		.endif;
		paste;

		rmc;clear;!set lE;lmc;
		is;

		.if;
			clear;rmc;clear;lmc;
			.hw;.OUT_TERM_NEWLINE;exeout;.hw;exit;
			clear;copy;
		.endif;
		paste;

		lmc;
		clear;add;
		
		.OUT_TERM_NEWLINE;exeout;
	endloop;
!endtmpl;

!tmpl main2;
	add;
	loop;
		rmc;
		
		.input;.OUT_TERM_NEWLINE;exeout;
		
		loop;
			rmc;
		endloop;
		rmc;
		.OUT_MEM_UPDATE_FIXED_POS_FROM_CURSOR;exeout;
		
		!setl hw;rmc;clear;
		
		rmc;.IN_MEM_FIXED_POS;exein;
		rmc;clear;add;lmc;
				
		.is_array;
		.if;
			.hw;
		.endif;
		
		.OUT_MEM_CLEAR_ALL;exeout;
		
		.OUT_MEM_UPDATE_FIXED_POS_FROM_VALUE;exeout;
		.OUT_MEM_SET_CURSOR;exeout;
		add;
		
		.OUT_TERM_NEWLINE;exeout;
	endloop;
!endtmpl;

.main2;